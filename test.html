<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Fuel Allocation Form</title>
    <style>
      /* Style for the form */
      form {
        max-width: 500px;
        margin: 0 auto;
      }
      
      label {
        display: block;
        margin-bottom: 10px;
      }
      
      input[type="text"], input[type="number"] {
        display: block;
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        margin-bottom: 20px;
      }
      
      input[type="submit"] {
        background-color: #4CAF50;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      
      input[type="submit"]:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <h1>Fuel Allocation Form</h1>
    
    <!-- Fuel allocation form -->
    <form id="fuel-allocation-form">
      <label for="token-number">Token Number</label>
      <input type="text" id="token-number" name="token-number">
      
      <label for="fuel-allocation">Fuel Allocation</label>
      <input type="number" id="fuel-allocation" name="fuel-allocation">
      
      <input type="submit" value="Submit">
    </form>
    
    <!-- Firebase configuration and initialization -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyAebGvZhL7hQLLllFF8Bm7iKyqT7FIyk-I",
        authDomain: "loginauth-38206.firebaseapp.com",
        databaseURL: "https://loginauth-38206-default-rtdb.firebaseio.com/",
        projectId: "loginauth-38206",
        storageBucket: "loginauth-38206.appspot.com",
        messagingSenderId: "479003296642",
        appId: "1:479003296642:web:20b63baf55a2ab0b12459b"
      };
      
      firebase.initializeApp(firebaseConfig);
      var databaseRef = firebase.database().ref("vehicleData");
      
      var tokenNumberInput = document.getElementById("token-number");
      var fuelAllocationForm = document.getElementById("fuel-allocation-form");
      var fuelAllocationInput = document.getElementById("fuel-allocation");
      
      // Listen for the submit event on the fuel allocation form
      fuelAllocationForm.addEventListener("submit", function(event) {
        event.preventDefault();
        
        // Get the user input values
        var tokenNumber = tokenNumberInput.value;
        var parseIn = parseInt(tokenNumber);
        var fuelAllocation = fuelAllocationInput.value;
        
        // Validate the token number
        databaseRef.orderByChild("tokenNumber").equalTo(parseIn).once("value", function(snapshot) {
          if (snapshot.exists()) {
            // Token number exists in the database, update the fuel allocation
            snapshot.forEach(function(childSnapshot) {
              var vehicleRef = childSnapshot.ref;
              var fuelAllocationRef = vehicleRef.child("fuelAllocation");
              fuelAllocationRef.set(fuelAllocation).then(function() {
                alert("Fuel allocation updated successfully.");
              }).catch(function(error) {
                alert("Error updating fuel allocation: " + error.message);
              });
            });
          } else {
            // Token number does not exist in the database, show an error message
            alert("Invalid token number. Please try again.");
          }
        });
      });
    </script>
  </body>
</html>
